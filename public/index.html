<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Realtime Spreadsheet</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/luckysheet@2.1.13/dist/plugins/css/plugins.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/luckysheet@2.1.13/dist/plugins/css/pluginsCss.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/luckysheet@2.1.13/dist/css/luckysheet.css" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="app-root">
      <header class="minimal-bar" id="minimal-bar">
        <a href="#" class="app-brand" id="logo-link">Realtime Sheet</a>
        <div class="minimal-bar-right">
          <span id="minimal-user-name" class="app-user-name"></span>
          <button type="button" id="minimal-logout-btn" class="app-btn-text">Logout</button>
        </div>
      </header>
      <header class="app-header sheet-only-ui" id="app-header">
        <div class="app-header-left">
          <button type="button" id="sidebar-toggle" class="app-hamburger" title="Menu" aria-label="Menu">☰</button>
          <a href="#" class="app-brand" id="logo-link-sheet">Realtime Sheet</a>
        </div>
        <div class="app-header-center">
          <span id="top-sheet-name" class="app-sheet-name" contenteditable="true" title="Sheet name"></span>
        </div>
        <div class="app-header-right" id="top-user-wrap">
          <button type="button" class="app-btn-share" id="header-share-btn">Share</button>
          <div class="app-user-avatar" id="top-user-avatar"></div>
          <span id="top-user-name" class="app-user-name"></span>
          <button type="button" id="top-logout-btn" class="app-btn-text">Logout</button>
        </div>
      </header>

      <div class="ribbon sheet-only-ui" id="ribbon">
        <div class="ribbon-tabs" id="ribbon-tabs">
          <div class="ribbon-tab" data-tab="file">File</div>
          <div class="ribbon-tab active" data-tab="home">Home</div>
          <div class="ribbon-tab" data-tab="insert">Insert</div>
          <div class="ribbon-tab" data-tab="page-layout">Page Layout</div>
          <div class="ribbon-tab" data-tab="formulas">Formulas</div>
          <div class="ribbon-tab" data-tab="data">Data</div>
          <div class="ribbon-tab" data-tab="review">Review</div>
          <div class="ribbon-tab" data-tab="view">View</div>
        </div>
        <div class="ribbon-content">
          <div class="ribbon-panel" id="ribbon-file" style="display:none"></div>
          <div class="ribbon-panel active" id="ribbon-home">
            <div class="ribbon-group">
              <span class="ribbon-group-label">Clipboard</span>
              <div class="ribbon-group-btns">
                <button type="button" class="ribbon-btn" title="Paste">Paste</button>
                <button type="button" class="ribbon-btn" title="Cut">Cut</button>
                <button type="button" class="ribbon-btn" title="Copy">Copy</button>
              </div>
            </div>
            <div class="ribbon-group">
              <span class="ribbon-group-label">Font</span>
              <div class="ribbon-group-btns">
                <select class="ribbon-select" id="toolbar-font"><option>Arial</option></select>
                <select class="ribbon-select ribbon-select-narrow" id="toolbar-size"><option>10</option><option>11</option><option>12</option></select>
                <button type="button" class="ribbon-btn" id="toolbar-bold" title="Bold"><b>B</b></button>
                <button type="button" class="ribbon-btn" id="toolbar-italic" title="Italic"><i>I</i></button>
                <button type="button" class="ribbon-btn" id="toolbar-underline" title="Underline"><u>U</u></button>
                <button type="button" class="ribbon-btn" id="toolbar-text-color" title="Text color">A</button>
                <button type="button" class="ribbon-btn" id="toolbar-fill" title="Fill color">▤</button>
              </div>
            </div>
            <div class="ribbon-group">
              <span class="ribbon-group-label">Alignment</span>
              <div class="ribbon-group-btns">
                <button type="button" class="ribbon-btn" id="toolbar-align-left" title="Align left">≡</button>
                <button type="button" class="ribbon-btn" id="toolbar-align-center" title="Align center">≡</button>
                <button type="button" class="ribbon-btn" id="toolbar-align-right" title="Align right">≡</button>
                <button type="button" class="ribbon-btn" id="toolbar-filter" title="Filter">⊞</button>
                <button type="button" class="ribbon-btn" id="toolbar-sum" title="Sum">Σ</button>
              </div>
            </div>
          </div>
          <div class="ribbon-panel" id="ribbon-insert">
            <div class="ribbon-group">
              <span class="ribbon-group-label">Rows & Columns</span>
              <div class="ribbon-group-btns">
                <button type="button" class="ribbon-btn" data-action="insert-row-above">Row above</button>
                <button type="button" class="ribbon-btn" data-action="insert-row-below">Row below</button>
                <button type="button" class="ribbon-btn" data-action="insert-column-left">Column left</button>
                <button type="button" class="ribbon-btn" data-action="insert-column-right">Column right</button>
              </div>
            </div>
          </div>
          <div class="ribbon-panel" id="ribbon-page-layout">
            <div class="ribbon-group">
              <span class="ribbon-group-label">Sheet Options</span>
              <div class="ribbon-group-btns">
                <button type="button" class="ribbon-btn" data-action="column-width">Column width</button>
                <button type="button" class="ribbon-btn" data-action="column-visibility">Column visibility</button>
              </div>
            </div>
          </div>
          <div class="ribbon-panel" id="ribbon-formulas">
            <div class="ribbon-group">
              <span class="ribbon-group-label">Function</span>
              <div class="ribbon-group-btns">
                <button type="button" class="ribbon-btn toolbar-sum" title="Sum">Σ Sum</button>
              </div>
            </div>
          </div>
          <div class="ribbon-panel" id="ribbon-data">
            <div class="ribbon-group">
              <span class="ribbon-group-label">Sort & Filter</span>
              <div class="ribbon-group-btns">
                <button type="button" class="ribbon-btn" data-action="placeholder">Sort A to Z</button>
                <button type="button" class="ribbon-btn" data-action="placeholder">Filter</button>
              </div>
            </div>
          </div>
          <div class="ribbon-panel" id="ribbon-review">
            <div class="ribbon-group">
              <span class="ribbon-group-label">Share</span>
              <div class="ribbon-group-btns">
                <button type="button" class="ribbon-btn" data-action="permissions">Permissions</button>
                <button type="button" class="ribbon-btn" data-action="history">Version history</button>
              </div>
            </div>
          </div>
          <div class="ribbon-panel" id="ribbon-view">
            <div class="ribbon-group">
              <span class="ribbon-group-label">View</span>
              <div class="ribbon-group-btns">
                <button type="button" class="ribbon-btn" data-action="placeholder">Full screen</button>
                <button type="button" class="ribbon-btn" data-action="placeholder">Freeze</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="menu-dropdowns" id="gs-menu-dropdowns">
        <div class="menu-dropdown" id="dropdown-file">
          <div class="menu-dropdown-item" data-action="new-sheet">New</div>
          <div class="menu-dropdown-item" data-action="placeholder">Open</div>
          <div class="menu-dropdown-item" data-action="placeholder">Make a copy</div>
          <div class="menu-dropdown-divider"></div>
          <div class="menu-dropdown-item" data-action="permissions">Permissions</div>
          <div class="menu-dropdown-item" data-action="history">Version history</div>
          <div class="menu-dropdown-item" data-action="export">Download</div>
          <div class="menu-dropdown-divider"></div>
          <div class="menu-dropdown-item" data-action="placeholder">Print</div>
        </div>
      </div>

      <main class="sheet-canvas">
        <section id="view-login" class="canvas-view">
          <div class="login-card">
            <h2>Sign in</h2>
            <form id="login-form">
              <label>Username <input type="text" id="login-username" required /></label>
              <label>Password <input type="password" id="login-password" required /></label>
              <button type="submit">Login</button>
              <p class="text-hint">Default: <code>admin</code> / <code>admin123</code></p>
              <p id="login-error" class="text-error"></p>
            </form>
          </div>
        </section>

        <section id="view-home" class="canvas-view hidden">
          <div class="canvas-inner">
            <h1 class="canvas-title">Home</h1>
            <button type="button" id="home-create-sheet-btn" class="btn-primary">Create new sheet</button>
            <div class="home-section">
              <h2>Recent</h2>
              <ul id="home-recent-sheets" class="sheet-list"></ul>
            </div>
            <div class="home-section">
              <h2>Shared with me</h2>
              <ul id="home-shared-sheets" class="sheet-list"></ul>
            </div>
          </div>
        </section>

        <section id="view-my-sheets" class="canvas-view hidden">
          <div class="canvas-inner">
            <h1 class="canvas-title">My Sheets</h1>
            <button type="button" id="my-create-sheet-btn" class="btn-primary">Create new sheet</button>
            <table class="data-table">
              <thead><tr><th>Name</th><th>Updated</th><th>Permission</th><th></th></tr></thead>
              <tbody id="my-sheets-table-body"></tbody>
            </table>
          </div>
        </section>

        <section id="view-shared-sheets" class="canvas-view hidden">
          <div class="canvas-inner">
            <h1 class="canvas-title">Shared Sheets</h1>
            <table class="data-table">
              <thead><tr><th>Name</th><th>Owner</th><th>Permission</th><th>Updated</th><th></th></tr></thead>
              <tbody id="shared-sheets-table-body"></tbody>
            </table>
          </div>
        </section>

        <section id="view-users" class="canvas-view hidden">
          <div class="canvas-inner">
            <h1 class="canvas-title">User Management</h1>
            <div class="user-create-row">
              <input type="text" id="um-username" placeholder="Username" />
              <input type="password" id="um-password" placeholder="Password" />
              <select id="um-role"><option value="leader">Leader</option><option value="user">User</option></select>
              <button type="button" id="um-create-btn" class="btn-primary">Create user</button>
            </div>
            <p id="um-message" class="text-info"></p>
            <table class="data-table">
              <thead><tr><th>Username</th><th>Role</th><th>Created by</th><th></th></tr></thead>
              <tbody id="um-table-body"></tbody>
            </table>
          </div>
        </section>

        <section id="view-settings" class="canvas-view hidden">
          <div class="canvas-inner">
            <h1 class="canvas-title">Settings</h1>
            <p class="text-hint">Profile and app settings.</p>
          </div>
        </section>

        <section id="view-sheet" class="canvas-view hidden">
          <div class="formula-bar">
            <span class="formula-fx">fx</span>
            <input type="text" class="formula-input" id="formula-input" placeholder="Enter formula or value" readonly />
            <span id="current-cell-ref" class="cell-ref">A1</span>
            <span id="current-cell-meta" class="cell-meta"></span>
          </div>
          <div class="grid-container">
            <div id="luckysheet" class="luckysheet-wrap"></div>
          </div>
          <div class="sheet-tabs-bar">
            <div class="sheet-tabs-scroll" id="sheet-tabs-scroll">
              <div class="sheet-tabs-list" id="sheet-tabs-list"></div>
              <button type="button" class="sheet-tab-add" id="sheet-tab-add" title="New sheet">+</button>
            </div>
          </div>
        </section>
      </main>
    </div>

    <div id="sidebar-overlay" class="overlay-sidebar">
      <div id="sidebar-backdrop" class="sidebar-backdrop"></div>
      <aside id="sidebar" class="sidebar-panel">
        <nav class="sidebar-nav">
          <button type="button" class="sidebar-nav-item" data-view="home" id="nav-home"><span>Home</span></button>
          <button type="button" class="sidebar-nav-item" data-view="my-sheets" id="nav-my-sheets"><span>My Sheets</span></button>
          <button type="button" class="sidebar-nav-item" data-view="shared-sheets" id="nav-shared-sheets"><span>Shared Sheets</span></button>
          <button type="button" class="sidebar-nav-item" data-view="users" id="nav-users" style="display:none"><span>User Management</span></button>
          <button type="button" class="sidebar-nav-item" data-view="settings" id="nav-settings"><span>Settings</span></button>
        </nav>
      </aside>
    </div>

    <div id="share-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-dialog">
        <h3>Share</h3>
        <form id="share-form">
          <label>User <select id="share-user-id"><option value="">Select user</option></select></label>
          <label>Role <select id="share-role"><option value="editor">Editor</option><option value="viewer">Viewer</option></select></label>
          <p id="share-message" class="text-info"></p>
          <div class="modal-actions">
            <button type="button" class="app-btn-text" id="share-cancel">Cancel</button>
            <button type="submit" class="btn-primary">Share</button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luckysheet@2.1.13/dist/plugins/js/plugin.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luckysheet@2.1.13/dist/luckysheet.umd.js"></script>
    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
